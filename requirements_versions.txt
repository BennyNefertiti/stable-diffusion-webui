# Core constraints to prevent compatibility issues
numpy<2.0.0,>=1.26.2
Pillow<11.0.0,>=9.5.0

# Prevent JAX/MediaPipe conflicts (these cause NumPy 2.x issues)
jax<0.5.0
jaxlib<0.5.0
mediapipe<0.10.20
ml_dtypes<0.5.0

# Your existing requirements (with some version constraints added)
GitPython==3.1.32
accelerate==0.21.0
blendmodes==2022
clean-fid==0.1.35
einops==0.4.1
facexlib==0.3.0
fastapi==0.94.0
gradio==3.41.2
httpcore==0.15
inflection==0.5.1
jsonmerge==1.8.0
kornia==0.6.7
lark==1.1.2
omegaconf==2.2.3
open-clip-torch==2.20.0
piexif==1.1.3
psutil==5.9.5
pytorch_lightning==1.9.4
resize-right==0.0.2
safetensors==0.4.2
scikit-image==0.21.0
spandrel==0.1.6
tomesd==0.1.3
torchdiffeq==0.2.3
torchsde==0.2.6
transformers==4.30.2
httpx==0.24.1
opencv-python==4.8.1.78
opencv-contrib-python==4.8.1.78

# Pin PyTorch to prevent version drift (use with CUDA 12.1)
torch==2.1.2
torchvision==0.16.2

# Additional constraints for common problematic packages
protobuf<5.0.0,>=3.20.0
scipy<1.14.0
matplotlib<4.0.0
pandas<3.0.0
requests<3.0.0
urllib3<3.0.0

# Prevent other packages that might pull incompatible versions
ultralytics<8.3.0  # Newer versions might cause issues
onnx<1.17.0
onnxruntime<1.19.0

# Pin some development/build tools to prevent issues
setuptools<70.0.0
wheel<0.44.0
pip<25.0.0